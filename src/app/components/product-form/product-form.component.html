<div class="container mt-4">
  <div class="row justify-content-center">
    <div class="col-md-8 col-lg-6">
      <h2 class="bg-primary text-white text-center py-3 rounded">
        Añade un producto
      </h2>
      <form
        (ngSubmit)="onSubmit()"
        [formGroup]="addProductForm"
        class="needs-validation"
      >
        <div class="mb-3">
          <label for="name" class="form-label">Nombre:</label>
          <input
            type="text"
            id="name"
            class="form-control"
            placeholder="Introduce el nombre"
            name="name"
            formControlName="name"
          />
          @if (checkControl('name', 'required')) {
            <div class="text-danger">El nombre es obligatorio</div>
          }
          @if (checkControl('name', 'minlength')) {
            <div class="text-danger">
              El nombre debe tener al menos 3 caracteres
            </div>
          }
        </div>
        <div class="mb-3">
          <label for="description" class="form-label">Descripción:</label>
          <textarea
            id="description"
            class="form-control"
            rows="3"
            placeholder="Introduce la descripción"
            name="description"
            formControlName="description"
          ></textarea>
          @if (checkControl('description', 'required')) {
            <div class="text-danger">La descripción es obligatoria</div>
          }
          @if (checkControl('description', 'maxlength')) {
            <div class="text-danger">
              La descripción no puede tener mas de 150 caracteres
            </div>
          }
        </div>
        <div class="mb-3">
          <label for="price" class="form-label">Precio:</label>
          <input
            type="number"
            id="price"
            class="form-control"
            placeholder="Introduce el precio"
            name="price"
            formControlName="price"
          />
          @if (checkControl('price', 'required')) {
            <div class="text-danger">El precio es obligatorio</div>
          }
          @if (checkControl('price', 'min')) {
            <div class="text-danger">El precio debe ser mayor que 0</div>
          }
        </div>
        <div class="mb-3">
          <label for="category" class="form-label">Categoría:</label>
          <select id="category" class="form-select" formControlName="category">
            <option value="" disabled selected>Selecciona una categoría</option>
            @for (category of categories; track $index) {
              <option [value]="category">{{ category }}</option>
            }
          </select>
          @if (checkControl('category', 'required')) {
            <div class="text-danger">La categoría es obligatoria</div>
          }
        </div>
        <div class="mb-3">
          <label for="image" class="form-label">Imagen (URL):</label>
          <input
            type="text"
            id="image"
            class="form-control"
            placeholder="Introduce la URL de la imagen"
            name="image"
            formControlName="image"
          />
          @if (checkControl('image', 'required')) {
            <div class="text-danger">La URL de la imagen es obligatoria</div>
          }
          @if (checkControl('image', 'pattern')) {
            <div class="text-danger">La URL de la imagen no es válida</div>
          }
        </div>
        <div class="form-check mb-3">
          <input
            type="checkbox"
            id="active"
            class="form-check-input"
            name="active"
            formControlName="active"
          />
          @if (checkControl('active', 'required')) {
            <div class="text-danger">El estado es obligatorio</div>
          }
          <label for="active" class="form-check-label">Activo</label>
        </div>
        <button type="submit" class="btn btn-primary" [disabled]="addProductForm.invalid">
          Guardar
        </button>
        <button
          type="button"
          class="btn btn-secondary ms-2"
          (click)="resetForm()"
        >
          Borrar
        </button>
      </form>
    </div>
  </div>
</div>
